<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<pre class="language-js" tabindex="0"><code class="language-js"><span class="token comment">/* PrismJS 1.27.0
https://prismjs.com/download.html#themes=prism&amp;languages=markup+css+clike+javascript */</span>
<span class="token comment">/// &lt;reference lib="WebWorker"/&gt;</span>

<span class="token keyword">var</span> _self <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span>
	<span class="token operator">?</span> window   <span class="token comment">// if in browser</span>
	<span class="token operator">:</span> <span class="token punctuation">(</span>
		<span class="token punctuation">(</span><span class="token keyword">typeof</span> WorkerGlobalScope <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> self <span class="token keyword">instanceof</span> <span class="token class-name">WorkerGlobalScope</span><span class="token punctuation">)</span>
			<span class="token operator">?</span> self <span class="token comment">// if in worker</span>
			<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// if in node js</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT &lt;https://opensource.org/licenses/MIT&gt;
 * @author Lea Verou &lt;https://lea.verou.me&gt;
 * @namespace
 * @public
 */</span>
<span class="token keyword">var</span> Prism <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// Private helper vars</span>
	<span class="token keyword">var</span> lang <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> uniqueId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">// The grammar object for plaintext</span>
	<span class="token keyword">var</span> plainTextGrammar <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


	<span class="token keyword">var</span> _ <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token comment">/**
		 * By default, Prism will attempt to highlight all code elements (by calling {@link Prism.highlightAll}) on the
		 * current page after the page finished loading. This might be a problem if e.g. you wanted to asynchronously load
		 * additional languages or plugins yourself.
		 *
		 * By setting this value to `true`, Prism will not automatically highlight all code elements on the page.
		 *
		 * You obviously have to change this value before the automatic highlighting started. To do this, you can add an
		 * empty Prism object into the global scope before loading the Prism script like this:
		 *
		 * ```js
		 * window.Prism = window.Prism || {};
		 * Prism.manual = true;
		 * // add a new &lt;script&gt; to load Prism's script
		 * ```
		 *
		 * @default false
		 * @type {boolean}
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token literal-property property">manual</span><span class="token operator">:</span> _self<span class="token punctuation">.</span>Prism <span class="token operator">&amp;&amp;</span> _self<span class="token punctuation">.</span>Prism<span class="token punctuation">.</span>manual<span class="token punctuation">,</span>
		<span class="token comment">/**
		 * By default, if Prism is in a web worker, it assumes that it is in a worker it created itself, so it uses
		 * `addEventListener` to communicate with its parent instance. However, if you're using Prism manually in your
		 * own worker, you don't want it to do this.
		 *
		 * By setting this value to `true`, Prism will not add its own listeners to the worker.
		 *
		 * You obviously have to change this value before Prism executes. To do this, you can add an
		 * empty Prism object into the global scope before loading the Prism script like this:
		 *
		 * ```js
		 * window.Prism = window.Prism || {};
		 * Prism.disableWorkerMessageHandler = true;
		 * // Load Prism's script
		 * ```
		 *
		 * @default false
		 * @type {boolean}
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token literal-property property">disableWorkerMessageHandler</span><span class="token operator">:</span> _self<span class="token punctuation">.</span>Prism <span class="token operator">&amp;&amp;</span> _self<span class="token punctuation">.</span>Prism<span class="token punctuation">.</span>disableWorkerMessageHandler<span class="token punctuation">,</span>

		<span class="token comment">/**
		 * A namespace for utility methods.
		 *
		 * All function in this namespace that are not explicitly marked as _public_ are for __internal use only__ and may
		 * change or disappear at any time.
		 *
		 * @namespace
		 * @memberof Prism
		 */</span>
		<span class="token literal-property property">util</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">encode</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">encode</span><span class="token punctuation">(</span><span class="token parameter">tokens</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>tokens <span class="token keyword">instanceof</span> <span class="token class-name">Token</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Token</span><span class="token punctuation">(</span>tokens<span class="token punctuation">.</span>type<span class="token punctuation">,</span> <span class="token function">encode</span><span class="token punctuation">(</span>tokens<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> tokens<span class="token punctuation">.</span>alias<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>tokens<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> tokens<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>encode<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> tokens<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;amp;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;lt;'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\u00a0</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Returns the name of the type of the given value.
			 *
			 * @param {any} o
			 * @returns {string}
			 * @example
			 * type(null)      === 'Null'
			 * type(undefined) === 'Undefined'
			 * type(123)       === 'Number'
			 * type('foo')     === 'String'
			 * type(true)      === 'Boolean'
			 * type([1, 2])    === 'Array'
			 * type({})        === 'Object'
			 * type(String)    === 'Function'
			 * type(/abc+/)    === 'RegExp'
			 */</span>
			<span class="token function-variable function">type</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Returns a unique number for the given object. Later calls will still return the same number.
			 *
			 * @param {Object} obj
			 * @returns {number}
			 */</span>
			<span class="token function-variable function">objId</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">[</span><span class="token string">'__id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'__id'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token operator">++</span>uniqueId <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> obj<span class="token punctuation">[</span><span class="token string">'__id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Creates a deep clone of the given object.
			 *
			 * The main intended use of this function is to clone language definitions.
			 *
			 * @param {T} o
			 * @param {Record&lt;number, any&gt;} [visited]
			 * @returns {T}
			 * @template T
			 */</span>
			<span class="token function-variable function">clone</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> visited</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				visited <span class="token operator">=</span> visited <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token keyword">var</span> clone<span class="token punctuation">;</span> <span class="token keyword">var</span> id<span class="token punctuation">;</span>
				<span class="token keyword">switch</span> <span class="token punctuation">(</span>_<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">case</span> <span class="token string">'Object'</span><span class="token operator">:</span>
						id <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">objId</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>visited<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> visited<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						clone <span class="token operator">=</span> <span class="token comment">/** @type {Record&lt;string, any&gt;} */</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						visited<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> clone<span class="token punctuation">;</span>

						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
								clone<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> visited<span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">return</span> <span class="token comment">/** @type {any} */</span> <span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">case</span> <span class="token string">'Array'</span><span class="token operator">:</span>
						id <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">objId</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>visited<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">return</span> visited<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						clone <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
						visited<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> clone<span class="token punctuation">;</span>

						<span class="token punctuation">(</span><span class="token comment">/** @type {Array} */</span><span class="token punctuation">(</span><span class="token comment">/** @type {any} */</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							clone<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> visited<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">return</span> <span class="token comment">/** @type {any} */</span> <span class="token punctuation">(</span>clone<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">default</span><span class="token operator">:</span>
						<span class="token keyword">return</span> o<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Returns the Prism language of the given element set by a `language-xxxx` or `lang-xxxx` class.
			 *
			 * If no language is set for the element or the element is `null` or `undefined`, `none` will be returned.
			 *
			 * @param {Element} element
			 * @returns {string}
			 */</span>
			<span class="token function-variable function">getLanguage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> m <span class="token operator">=</span> lang<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					element <span class="token operator">=</span> element<span class="token punctuation">.</span>parentElement<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Sets the Prism `language-xxxx` class of the given element.
			 *
			 * @param {Element} element
			 * @param {string} language
			 * @returns {void}
			 */</span>
			<span class="token function-variable function">setLanguage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// remove all `language-xxxx` classes</span>
				<span class="token comment">// (this might leave behind a leading space)</span>
				element<span class="token punctuation">.</span>className <span class="token operator">=</span> element<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token function">RegExp</span><span class="token punctuation">(</span>lang<span class="token punctuation">,</span> <span class="token string">'gi'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// add the new `language-xxxx` class</span>
				<span class="token comment">// (using `classList` will automatically clean up spaces for us)</span>
				element<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'language-'</span> <span class="token operator">+</span> language<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Returns the script element that is currently executing.
			 *
			 * This does __not__ work for line script element.
			 *
			 * @returns {HTMLScriptElement | null}
			 */</span>
			<span class="token function-variable function">currentScript</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> document <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'currentScript'</span> <span class="token keyword">in</span> document <span class="token operator">&amp;&amp;</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token comment">/* hack to trip TS' flow analysis */</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> <span class="token comment">/** @type {any} */</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>currentScript<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// IE11 workaround</span>
				<span class="token comment">// we'll get the src of the current script by parsing IE11's error stack trace</span>
				<span class="token comment">// this will not work for inline scripts</span>

				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Get file src url from stack. Specifically works with the format of stack traces in IE.</span>
					<span class="token comment">// A stack will look like this:</span>
					<span class="token comment">//</span>
					<span class="token comment">// Error</span>
					<span class="token comment">//    at _.util.currentScript (http://localhost/components/prism-core.js:119:5)</span>
					<span class="token comment">//    at Global code (http://localhost/components/prism-core.js:606:1)</span>

					<span class="token keyword">var</span> src <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at [^(\r\n]*\((.*):[^:]+:[^:]+\)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">var</span> scripts <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> scripts<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">if</span> <span class="token punctuation">(</span>scripts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">==</span> src<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">return</span> scripts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Returns whether a given class is active for `element`.
			 *
			 * The class can be activated if `element` or one of its ancestors has the given class and it can be deactivated
			 * if `element` or one of its ancestors has the negated version of the given class. The _negated version_ of the
			 * given class is just the given class with a `no-` prefix.
			 *
			 * Whether the class is active is determined by the closest ancestor of `element` (where `element` itself is
			 * closest ancestor) that has the given class or the negated version of it. If neither `element` nor any of its
			 * ancestors have the given class or the negated version of it, then the default activation will be returned.
			 *
			 * In the paradoxical situation where the closest ancestor contains __both__ the given class and the negated
			 * version of it, the class is considered active.
			 *
			 * @param {Element} element
			 * @param {string} className
			 * @param {boolean} [defaultActivation=false]
			 * @returns {boolean}
			 */</span>
			<span class="token function-variable function">isActive</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> className<span class="token punctuation">,</span> defaultActivation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> no <span class="token operator">=</span> <span class="token string">'no-'</span> <span class="token operator">+</span> className<span class="token punctuation">;</span>

				<span class="token keyword">while</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">var</span> classList <span class="token operator">=</span> element<span class="token punctuation">.</span>classList<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>no<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					element <span class="token operator">=</span> element<span class="token punctuation">.</span>parentElement<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token operator">!</span><span class="token operator">!</span>defaultActivation<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * This namespace contains all currently loaded languages and the some helper functions to create and modify languages.
		 *
		 * @namespace
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token literal-property property">languages</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token comment">/**
			 * The grammar for plain, unformatted text.
			 */</span>
			<span class="token literal-property property">plain</span><span class="token operator">:</span> plainTextGrammar<span class="token punctuation">,</span>
			<span class="token literal-property property">plaintext</span><span class="token operator">:</span> plainTextGrammar<span class="token punctuation">,</span>
			<span class="token literal-property property">text</span><span class="token operator">:</span> plainTextGrammar<span class="token punctuation">,</span>
			<span class="token literal-property property">txt</span><span class="token operator">:</span> plainTextGrammar<span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Creates a deep copy of the language with the given id and appends the given tokens.
			 *
			 * If a token in `redef` also appears in the copied language, then the existing token in the copied language
			 * will be overwritten at its original position.
			 *
			 * ## Best practices
			 *
			 * Since the position of overwriting tokens (token in `redef` that overwrite tokens in the copied language)
			 * doesn't matter, they can technically be in any order. However, this can be confusing to others that trying to
			 * understand the language definition because, normally, the order of tokens matters in Prism grammars.
			 *
			 * Therefore, it is encouraged to order overwriting tokens according to the positions of the overwritten tokens.
			 * Furthermore, all non-overwriting tokens should be placed after the overwriting ones.
			 *
			 * @param {string} id The id of the language to extend. This has to be a key in `Prism.languages`.
			 * @param {Grammar} redef The new tokens to append.
			 * @returns {Grammar} The new language created.
			 * @public
			 * @example
			 * Prism.languages['css-with-colors'] = Prism.languages.extend('css', {
			 *     // Prism.languages.css already has a 'comment' token, so this token will overwrite CSS' 'comment' token
			 *     // at its original position
			 *     'comment': { ... },
			 *     // CSS doesn't have a 'color' token, so this token will be appended
			 *     'color': /\b(?:red|green|blue)\b/
			 * });
			 */</span>
			<span class="token function-variable function">extend</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id<span class="token punctuation">,</span> redef</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> lang <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>languages<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> redef<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					lang<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> redef<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">return</span> lang<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Inserts tokens _before_ another token in a language definition or any other grammar.
			 *
			 * ## Usage
			 *
			 * This helper method makes it easy to modify existing languages. For example, the CSS language definition
			 * not only defines CSS highlighting for CSS documents, but also needs to define highlighting for CSS embedded
			 * in HTML through `&lt;style&gt;` elements. To do this, it needs to modify `Prism.languages.markup` and add the
			 * appropriate tokens. However, `Prism.languages.markup` is a regular JavaScript object literal, so if you do
			 * this:
			 *
			 * ```js
			 * Prism.languages.markup.style = {
			 *     // token
			 * };
			 * ```
			 *
			 * then the `style` token will be added (and processed) at the end. `insertBefore` allows you to insert tokens
			 * before existing tokens. For the CSS example above, you would use it like this:
			 *
			 * ```js
			 * Prism.languages.insertBefore('markup', 'cdata', {
			 *     'style': {
			 *         // token
			 *     }
			 * });
			 * ```
			 *
			 * ## Special cases
			 *
			 * If the grammars of `inside` and `insert` have tokens with the same name, the tokens in `inside`'s grammar
			 * will be ignored.
			 *
			 * This behavior can be used to insert tokens after `before`:
			 *
			 * ```js
			 * Prism.languages.insertBefore('markup', 'comment', {
			 *     'comment': Prism.languages.markup.comment,
			 *     // tokens after 'comment'
			 * });
			 * ```
			 *
			 * ## Limitations
			 *
			 * The main problem `insertBefore` has to solve is iteration order. Since ES2015, the iteration order for object
			 * properties is guaranteed to be the insertion order (except for integer keys) but some browsers behave
			 * differently when keys are deleted and re-inserted. So `insertBefore` can't be implemented by temporarily
			 * deleting properties which is necessary to insert at arbitrary positions.
			 *
			 * To solve this problem, `insertBefore` doesn't actually insert the given tokens into the target object.
			 * Instead, it will create a new object and replace all references to the target object with the new one. This
			 * can be done without temporarily deleting properties, so the iteration order is well-defined.
			 *
			 * However, only references that can be reached from `Prism.languages` or `insert` will be replaced. I.e. if
			 * you hold the target object in a variable, then the value of the variable will not change.
			 *
			 * ```js
			 * var oldMarkup = Prism.languages.markup;
			 * var newMarkup = Prism.languages.insertBefore('markup', 'comment', { ... });
			 *
			 * assert(oldMarkup !== Prism.languages.markup);
			 * assert(newMarkup === Prism.languages.markup);
			 * ```
			 *
			 * @param {string} inside The property of `root` (e.g. a language id in `Prism.languages`) that contains the
			 * object to be modified.
			 * @param {string} before The key to insert before.
			 * @param {Grammar} insert An object containing the key-value pairs to be inserted.
			 * @param {Object&lt;string, any&gt;} [root] The object containing `inside`, i.e. the object that contains the
			 * object to be modified.
			 *
			 * Defaults to `Prism.languages`.
			 * @returns {Grammar} The new grammar object.
			 * @public
			 */</span>
			<span class="token function-variable function">insertBefore</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">inside<span class="token punctuation">,</span> before<span class="token punctuation">,</span> insert<span class="token punctuation">,</span> root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				root <span class="token operator">=</span> root <span class="token operator">||</span> <span class="token comment">/** @type {any} */</span> <span class="token punctuation">(</span>_<span class="token punctuation">.</span>languages<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> grammar <span class="token operator">=</span> root<span class="token punctuation">[</span>inside<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token comment">/** @type {Grammar} */</span>
				<span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> token <span class="token keyword">in</span> grammar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>grammar<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>token <span class="token operator">==</span> before<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> newToken <span class="token keyword">in</span> insert<span class="token punctuation">)</span> <span class="token punctuation">{</span>
								<span class="token keyword">if</span> <span class="token punctuation">(</span>insert<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>newToken<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
									ret<span class="token punctuation">[</span>newToken<span class="token punctuation">]</span> <span class="token operator">=</span> insert<span class="token punctuation">[</span>newToken<span class="token punctuation">]</span><span class="token punctuation">;</span>
								<span class="token punctuation">}</span>
							<span class="token punctuation">}</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// Do not insert token which also occur in insert. See #1525</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>insert<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							ret<span class="token punctuation">[</span>token<span class="token punctuation">]</span> <span class="token operator">=</span> grammar<span class="token punctuation">[</span>token<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">var</span> old <span class="token operator">=</span> root<span class="token punctuation">[</span>inside<span class="token punctuation">]</span><span class="token punctuation">;</span>
				root<span class="token punctuation">[</span>inside<span class="token punctuation">]</span> <span class="token operator">=</span> ret<span class="token punctuation">;</span>

				<span class="token comment">// Update references in other language definitions</span>
				_<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token constant">DFS</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>languages<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> old <span class="token operator">&amp;&amp;</span> key <span class="token operator">!=</span> inside<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">this</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> ret<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">// Traverse a language definition with Depth First Search</span>
			<span class="token function-variable function">DFS</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token constant">DFS</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> type<span class="token punctuation">,</span> visited</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				visited <span class="token operator">=</span> visited <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

				<span class="token keyword">var</span> objId <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span>objId<span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> o<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> i<span class="token punctuation">,</span> o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> type <span class="token operator">||</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">var</span> property <span class="token operator">=</span> o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token keyword">var</span> propertyType <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token keyword">if</span> <span class="token punctuation">(</span>propertyType <span class="token operator">===</span> <span class="token string">'Object'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>visited<span class="token punctuation">[</span><span class="token function">objId</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							visited<span class="token punctuation">[</span><span class="token function">objId</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token constant">DFS</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> visited<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyType <span class="token operator">===</span> <span class="token string">'Array'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>visited<span class="token punctuation">[</span><span class="token function">objId</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							visited<span class="token punctuation">[</span><span class="token function">objId</span><span class="token punctuation">(</span>property<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
							<span class="token constant">DFS</span><span class="token punctuation">(</span>property<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> i<span class="token punctuation">,</span> visited<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * This is the most high-level function in Prisms API.
		 * It fetches all the elements that have a `.language-xxxx` class and then calls {@link Prism.highlightElement} on
		 * each one of them.
		 *
		 * This is equivalent to `Prism.highlightAllUnder(document, async, callback)`.
		 *
		 * @param {boolean} [async=false] Same as in {@link Prism.highlightAllUnder}.
		 * @param {HighlightCallback} [callback] Same as in {@link Prism.highlightAllUnder}.
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token function-variable function">highlightAll</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">async<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			_<span class="token punctuation">.</span><span class="token function">highlightAllUnder</span><span class="token punctuation">(</span>document<span class="token punctuation">,</span> async<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * Fetches all the descendants of `container` that have a `.language-xxxx` class and then calls
		 * {@link Prism.highlightElement} on each one of them.
		 *
		 * The following hooks will be run:
		 * 1. `before-highlightall`
		 * 2. `before-all-elements-highlight`
		 * 3. All hooks of {@link Prism.highlightElement} for each element.
		 *
		 * @param {ParentNode} container The root element, whose descendants that have a `.language-xxxx` class will be highlighted.
		 * @param {boolean} [async=false] Whether each element is to be highlighted asynchronously using Web Workers.
		 * @param {HighlightCallback} [callback] An optional callback to be invoked on each element after its highlighting is done.
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token function-variable function">highlightAllUnder</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">container<span class="token punctuation">,</span> async<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">callback</span><span class="token operator">:</span> callback<span class="token punctuation">,</span>
				<span class="token literal-property property">container</span><span class="token operator">:</span> container<span class="token punctuation">,</span>
				<span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'before-highlightall'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>

			env<span class="token punctuation">.</span>elements <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>container<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>selector<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'before-all-elements-highlight'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> element<span class="token punctuation">;</span> <span class="token punctuation">(</span>element <span class="token operator">=</span> env<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				_<span class="token punctuation">.</span><span class="token function">highlightElement</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> async <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * Highlights the code inside a single element.
		 *
		 * The following hooks will be run:
		 * 1. `before-sanity-check`
		 * 2. `before-highlight`
		 * 3. All hooks of {@link Prism.highlight}. These hooks will be run by an asynchronous worker if `async` is `true`.
		 * 4. `before-insert`
		 * 5. `after-highlight`
		 * 6. `complete`
		 *
		 * Some the above hooks will be skipped if the element doesn't contain any text or there is no grammar loaded for
		 * the element's language.
		 *
		 * @param {Element} element The element containing the code.
		 * It must have a class of `language-xxxx` to be processed, where `xxxx` is a valid language identifier.
		 * @param {boolean} [async=false] Whether the element is to be highlighted asynchronously using Web Workers
		 * to improve performance and avoid blocking the UI when highlighting very large chunks of code. This option is
		 * [disabled by default](https://prismjs.com/faq.html#why-is-asynchronous-highlighting-disabled-by-default).
		 *
		 * Note: All language definitions required to highlight the code must be included in the main `prism.js` file for
		 * asynchronous highlighting to work. You can build your own bundle on the
		 * [Download page](https://prismjs.com/download.html).
		 * @param {HighlightCallback} [callback] An optional callback to be invoked after the highlighting is done.
		 * Mostly useful when `async` is `true`, since in that case, the highlighting is done asynchronously.
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token function-variable function">highlightElement</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> async<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Find language</span>
			<span class="token keyword">var</span> language <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">getLanguage</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> grammar <span class="token operator">=</span> _<span class="token punctuation">.</span>languages<span class="token punctuation">[</span>language<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token comment">// Set language on the element, if not present</span>
			_<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">setLanguage</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// Set language on the parent, for styling</span>
			<span class="token keyword">var</span> parent <span class="token operator">=</span> element<span class="token punctuation">.</span>parentElement<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'pre'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				_<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">setLanguage</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> code <span class="token operator">=</span> element<span class="token punctuation">.</span>textContent<span class="token punctuation">;</span>

			<span class="token keyword">var</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">element</span><span class="token operator">:</span> element<span class="token punctuation">,</span>
				<span class="token literal-property property">language</span><span class="token operator">:</span> language<span class="token punctuation">,</span>
				<span class="token literal-property property">grammar</span><span class="token operator">:</span> grammar<span class="token punctuation">,</span>
				<span class="token literal-property property">code</span><span class="token operator">:</span> code
			<span class="token punctuation">}</span><span class="token punctuation">;</span>

			<span class="token keyword">function</span> <span class="token function">insertHighlightedCode</span><span class="token punctuation">(</span><span class="token parameter">highlightedCode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				env<span class="token punctuation">.</span>highlightedCode <span class="token operator">=</span> highlightedCode<span class="token punctuation">;</span>

				_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'before-insert'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>

				env<span class="token punctuation">.</span>element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> env<span class="token punctuation">.</span>highlightedCode<span class="token punctuation">;</span>

				_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'after-highlight'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
				_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'complete'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
				callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'before-sanity-check'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">// plugins may change/add the parent/element</span>
			parent <span class="token operator">=</span> env<span class="token punctuation">.</span>element<span class="token punctuation">.</span>parentElement<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">&amp;&amp;</span> parent<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'pre'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>parent<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				parent<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'tabindex'</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>env<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'complete'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
				callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'before-highlight'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>env<span class="token punctuation">.</span>grammar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">insertHighlightedCode</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>async <span class="token operator">&amp;&amp;</span> _self<span class="token punctuation">.</span>Worker<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span>

				worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">insertHighlightedCode</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>

				worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token literal-property property">language</span><span class="token operator">:</span> env<span class="token punctuation">.</span>language<span class="token punctuation">,</span>
					<span class="token literal-property property">code</span><span class="token operator">:</span> env<span class="token punctuation">.</span>code<span class="token punctuation">,</span>
					<span class="token literal-property property">immediateClose</span><span class="token operator">:</span> <span class="token boolean">true</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token function">insertHighlightedCode</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>code<span class="token punctuation">,</span> env<span class="token punctuation">.</span>grammar<span class="token punctuation">,</span> env<span class="token punctuation">.</span>language<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * Low-level function, only use if you know what youre doing. It accepts a string of text as input
		 * and the language definitions to use, and returns a string with the HTML produced.
		 *
		 * The following hooks will be run:
		 * 1. `before-tokenize`
		 * 2. `after-tokenize`
		 * 3. `wrap`: On each {@link Token}.
		 *
		 * @param {string} text A string with the code to be highlighted.
		 * @param {Grammar} grammar An object containing the tokens to use.
		 *
		 * Usually a language definition like `Prism.languages.markup`.
		 * @param {string} language The name of the language definition passed to `grammar`.
		 * @returns {string} The highlighted HTML.
		 * @memberof Prism
		 * @public
		 * @example
		 * Prism.highlight('var foo = true;', Prism.languages.javascript, 'javascript');
		 */</span>
		<span class="token function-variable function">highlight</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> grammar<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">code</span><span class="token operator">:</span> text<span class="token punctuation">,</span>
				<span class="token literal-property property">grammar</span><span class="token operator">:</span> grammar<span class="token punctuation">,</span>
				<span class="token literal-property property">language</span><span class="token operator">:</span> language
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
			_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'before-tokenize'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>env<span class="token punctuation">.</span>grammar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'The language "'</span> <span class="token operator">+</span> env<span class="token punctuation">.</span>language <span class="token operator">+</span> <span class="token string">'" has no grammar.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			env<span class="token punctuation">.</span>tokens <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>code<span class="token punctuation">,</span> env<span class="token punctuation">.</span>grammar<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'after-tokenize'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> Token<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>tokens<span class="token punctuation">)</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>language<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * This is the heart of Prism, and the most low-level function you can use. It accepts a string of text as input
		 * and the language definitions to use, and returns an array with the tokenized code.
		 *
		 * When the language definition includes nested tokens, the function is called recursively on each of these tokens.
		 *
		 * This method could be useful in other contexts as well, as a very crude parser.
		 *
		 * @param {string} text A string with the code to be highlighted.
		 * @param {Grammar} grammar An object containing the tokens to use.
		 *
		 * Usually a language definition like `Prism.languages.markup`.
		 * @returns {TokenStream} An array of strings and tokens, a token stream.
		 * @memberof Prism
		 * @public
		 * @example
		 * let code = `var foo = 0;`;
		 * let tokens = Prism.tokenize(code, Prism.languages.javascript);
		 * tokens.forEach(token =&gt; {
		 *     if (token instanceof Prism.Token &amp;&amp; token.type === 'number') {
		 *         console.log(`Found numeric literal: ${token.content}`);
		 *     }
		 * });
		 */</span>
		<span class="token function-variable function">tokenize</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> grammar</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> rest <span class="token operator">=</span> grammar<span class="token punctuation">.</span>rest<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>rest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> token <span class="token keyword">in</span> rest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					grammar<span class="token punctuation">[</span>token<span class="token punctuation">]</span> <span class="token operator">=</span> rest<span class="token punctuation">[</span>token<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">delete</span> grammar<span class="token punctuation">.</span>rest<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> tokenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">addAfter</span><span class="token punctuation">(</span>tokenList<span class="token punctuation">,</span> tokenList<span class="token punctuation">.</span>head<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token function">matchGrammar</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> tokenList<span class="token punctuation">,</span> grammar<span class="token punctuation">,</span> tokenList<span class="token punctuation">.</span>head<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token function">toArray</span><span class="token punctuation">(</span>tokenList<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">/**
		 * @namespace
		 * @memberof Prism
		 * @public
		 */</span>
		<span class="token literal-property property">hooks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">all</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Adds the given callback to the list of callbacks for the given hook.
			 *
			 * The callback will be invoked when the hook it is registered for is run.
			 * Hooks are usually directly run by a highlight function but you can also run hooks yourself.
			 *
			 * One callback function can be registered to multiple hooks and the same hook multiple times.
			 *
			 * @param {string} name The name of the hook.
			 * @param {HookCallback} callback The callback function which is given environment variables.
			 * @public
			 */</span>
			<span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> hooks <span class="token operator">=</span> _<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>all<span class="token punctuation">;</span>

				hooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> hooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

				hooks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>

			<span class="token comment">/**
			 * Runs a hook invoking all registered callbacks with the given environment variables.
			 *
			 * Callbacks will be invoked synchronously and in the order in which they were registered.
			 *
			 * @param {string} name The name of the hook.
			 * @param {Object&lt;string, any&gt;} env The environment variables of the hook passed to all callbacks registered.
			 * @public
			 */</span>
			<span class="token function-variable function">run</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> callbacks <span class="token operator">=</span> _<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>all<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>callbacks <span class="token operator">||</span> <span class="token operator">!</span>callbacks<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> callback<span class="token punctuation">;</span> <span class="token punctuation">(</span>callback <span class="token operator">=</span> callbacks<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token literal-property property">Token</span><span class="token operator">:</span> Token
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	_self<span class="token punctuation">.</span>Prism <span class="token operator">=</span> _<span class="token punctuation">;</span>


	<span class="token comment">// Typescript note:</span>
	<span class="token comment">// The following can be used to import the Token type in JSDoc:</span>
	<span class="token comment">//</span>
	<span class="token comment">//   @typedef {InstanceType&lt;import("./prism-core")["Token"]&gt;} Token</span>

	<span class="token comment">/**
	 * Creates a new token.
	 *
	 * @param {string} type See {@link Token#type type}
	 * @param {string | TokenStream} content See {@link Token#content content}
	 * @param {string|string[]} [alias] The alias(es) of the token.
	 * @param {string} [matchedStr=""] A copy of the full string this token was created from.
	 * @class
	 * @global
	 * @public
	 */</span>
	<span class="token keyword">function</span> <span class="token function">Token</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> content<span class="token punctuation">,</span> alias<span class="token punctuation">,</span> matchedStr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/**
		 * The type of the token.
		 *
		 * This is usually the key of a pattern in a {@link Grammar}.
		 *
		 * @type {string}
		 * @see GrammarToken
		 * @public
		 */</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">;</span>
		<span class="token comment">/**
		 * The strings or tokens contained by this token.
		 *
		 * This will be a token stream if the pattern matched also defined an `inside` grammar.
		 *
		 * @type {string | TokenStream}
		 * @public
		 */</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
		<span class="token comment">/**
		 * The alias(es) of the token.
		 *
		 * @type {string|string[]}
		 * @see GrammarToken
		 * @public
		 */</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>alias <span class="token operator">=</span> alias<span class="token punctuation">;</span>
		<span class="token comment">// Copy of the full string this token was created from</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token punctuation">(</span>matchedStr <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * A token stream is an array of strings and {@link Token Token} objects.
	 *
	 * Token streams have to fulfill a few properties that are assumed by most functions (mostly internal ones) that process
	 * them.
	 *
	 * 1. No adjacent strings.
	 * 2. No empty strings.
	 *
	 *    The only exception here is the token stream that only contains the empty string and nothing else.
	 *
	 * @typedef {Array&lt;string | Token&gt;} TokenStream
	 * @global
	 * @public
	 */</span>

	<span class="token comment">/**
	 * Converts the given token or token stream to an HTML representation.
	 *
	 * The following hooks will be run:
	 * 1. `wrap`: On each {@link Token}.
	 *
	 * @param {string | Token | TokenStream} o The token or token stream to be converted.
	 * @param {string} language The name of current language.
	 * @returns {string} The HTML representation of the token or token stream.
	 * @memberof Token
	 * @static
	 */</span>
	Token<span class="token punctuation">.</span><span class="token function-variable function">stringify</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">stringify</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> language</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> o <span class="token operator">==</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> o<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
			o<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				s <span class="token operator">+=</span> <span class="token function">stringify</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> s<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">var</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">type</span><span class="token operator">:</span> o<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
			<span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token function">stringify</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>content<span class="token punctuation">,</span> language<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'span'</span><span class="token punctuation">,</span>
			<span class="token literal-property property">classes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span>type<span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token literal-property property">language</span><span class="token operator">:</span> language
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> aliases <span class="token operator">=</span> o<span class="token punctuation">.</span>alias<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>aliases<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>aliases<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>env<span class="token punctuation">.</span>classes<span class="token punctuation">,</span> aliases<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				env<span class="token punctuation">.</span>classes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>aliases<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		_<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token string">'wrap'</span><span class="token punctuation">,</span> env<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> attributes <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> env<span class="token punctuation">.</span>attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			attributes <span class="token operator">+=</span> <span class="token string">' '</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'="'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;quot;'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> <span class="token string">'&lt;'</span> <span class="token operator">+</span> env<span class="token punctuation">.</span>tag <span class="token operator">+</span> <span class="token string">' class="'</span> <span class="token operator">+</span> env<span class="token punctuation">.</span>classes<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"'</span> <span class="token operator">+</span> attributes <span class="token operator">+</span> <span class="token string">'&gt;'</span> <span class="token operator">+</span> env<span class="token punctuation">.</span>content <span class="token operator">+</span> <span class="token string">'&lt;/'</span> <span class="token operator">+</span> env<span class="token punctuation">.</span>tag <span class="token operator">+</span> <span class="token string">'&gt;'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * @param {RegExp} pattern
	 * @param {number} pos
	 * @param {string} text
	 * @param {boolean} lookbehind
	 * @returns {RegExpExecArray | null}
	 */</span>
	<span class="token keyword">function</span> <span class="token function">matchPattern</span><span class="token punctuation">(</span><span class="token parameter">pattern<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> text<span class="token punctuation">,</span> lookbehind</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		pattern<span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> pos<span class="token punctuation">;</span>
		<span class="token keyword">var</span> match <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>match <span class="token operator">&amp;&amp;</span> lookbehind <span class="token operator">&amp;&amp;</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// change the match to remove the text matched by the Prism lookbehind group</span>
			<span class="token keyword">var</span> lookbehindLength <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
			match<span class="token punctuation">.</span>index <span class="token operator">+=</span> lookbehindLength<span class="token punctuation">;</span>
			match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>lookbehindLength<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> match<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * @param {string} text
	 * @param {LinkedList&lt;string | Token&gt;} tokenList
	 * @param {any} grammar
	 * @param {LinkedListNode&lt;string | Token&gt;} startNode
	 * @param {number} startPos
	 * @param {RematchOptions} [rematch]
	 * @returns {void}
	 * @private
	 *
	 * @typedef RematchOptions
	 * @property {string} cause
	 * @property {number} reach
	 */</span>
	<span class="token keyword">function</span> <span class="token function">matchGrammar</span><span class="token punctuation">(</span><span class="token parameter">text<span class="token punctuation">,</span> tokenList<span class="token punctuation">,</span> grammar<span class="token punctuation">,</span> startNode<span class="token punctuation">,</span> startPos<span class="token punctuation">,</span> rematch</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> token <span class="token keyword">in</span> grammar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>grammar<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>grammar<span class="token punctuation">[</span>token<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">var</span> patterns <span class="token operator">=</span> grammar<span class="token punctuation">[</span>token<span class="token punctuation">]</span><span class="token punctuation">;</span>
			patterns <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>patterns<span class="token punctuation">)</span> <span class="token operator">?</span> patterns <span class="token operator">:</span> <span class="token punctuation">[</span>patterns<span class="token punctuation">]</span><span class="token punctuation">;</span>

			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> patterns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>rematch <span class="token operator">&amp;&amp;</span> rematch<span class="token punctuation">.</span>cause <span class="token operator">==</span> token <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token keyword">var</span> patternObj <span class="token operator">=</span> patterns<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> inside <span class="token operator">=</span> patternObj<span class="token punctuation">.</span>inside<span class="token punctuation">;</span>
				<span class="token keyword">var</span> lookbehind <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>patternObj<span class="token punctuation">.</span>lookbehind<span class="token punctuation">;</span>
				<span class="token keyword">var</span> greedy <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>patternObj<span class="token punctuation">.</span>greedy<span class="token punctuation">;</span>
				<span class="token keyword">var</span> alias <span class="token operator">=</span> patternObj<span class="token punctuation">.</span>alias<span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>greedy <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>patternObj<span class="token punctuation">.</span>pattern<span class="token punctuation">.</span>global<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// Without the global flag, lastIndex won't work</span>
					<span class="token keyword">var</span> flags <span class="token operator">=</span> patternObj<span class="token punctuation">.</span>pattern<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[imsuy]*$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					patternObj<span class="token punctuation">.</span>pattern <span class="token operator">=</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>patternObj<span class="token punctuation">.</span>pattern<span class="token punctuation">.</span>source<span class="token punctuation">,</span> flags <span class="token operator">+</span> <span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">/** @type {RegExp} */</span>
				<span class="token keyword">var</span> pattern <span class="token operator">=</span> patternObj<span class="token punctuation">.</span>pattern <span class="token operator">||</span> patternObj<span class="token punctuation">;</span>

				<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token comment">// iterate the token list and keep track of the current token/string position</span>
					<span class="token keyword">var</span> currentNode <span class="token operator">=</span> startNode<span class="token punctuation">.</span>next<span class="token punctuation">,</span> pos <span class="token operator">=</span> startPos<span class="token punctuation">;</span>
					currentNode <span class="token operator">!==</span> tokenList<span class="token punctuation">.</span>tail<span class="token punctuation">;</span>
					pos <span class="token operator">+=</span> currentNode<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">,</span> currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next
				<span class="token punctuation">)</span> <span class="token punctuation">{</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>rematch <span class="token operator">&amp;&amp;</span> pos <span class="token operator">&gt;=</span> rematch<span class="token punctuation">.</span>reach<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">break</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">var</span> str <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>tokenList<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> text<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// Something went terribly wrong, ABORT, ABORT!</span>
						<span class="token keyword">return</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token keyword">instanceof</span> <span class="token class-name">Token</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">continue</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">var</span> removeCount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// this is the to parameter of removeBetween</span>
					<span class="token keyword">var</span> match<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>greedy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						match <span class="token operator">=</span> <span class="token function">matchPattern</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> text<span class="token punctuation">,</span> lookbehind<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match <span class="token operator">||</span> match<span class="token punctuation">.</span>index <span class="token operator">&gt;=</span> text<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">break</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token keyword">var</span> from <span class="token operator">=</span> match<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
						<span class="token keyword">var</span> to <span class="token operator">=</span> match<span class="token punctuation">.</span>index <span class="token operator">+</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token keyword">var</span> p <span class="token operator">=</span> pos<span class="token punctuation">;</span>

						<span class="token comment">// find the node that contains the match</span>
						p <span class="token operator">+=</span> currentNode<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>from <span class="token operator">&gt;=</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							currentNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
							p <span class="token operator">+=</span> currentNode<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						<span class="token comment">// adjust pos (and p)</span>
						p <span class="token operator">-=</span> currentNode<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						pos <span class="token operator">=</span> p<span class="token punctuation">;</span>

						<span class="token comment">// the current node is a Token, then the match starts inside another Token, which is invalid</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>currentNode<span class="token punctuation">.</span>value <span class="token keyword">instanceof</span> <span class="token class-name">Token</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">continue</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>

						<span class="token comment">// find the last node which is affected by this match</span>
						<span class="token keyword">for</span> <span class="token punctuation">(</span>
							<span class="token keyword">var</span> k <span class="token operator">=</span> currentNode<span class="token punctuation">;</span>
							k <span class="token operator">!==</span> tokenList<span class="token punctuation">.</span>tail <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>p <span class="token operator">&lt;</span> to <span class="token operator">||</span> <span class="token keyword">typeof</span> k<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							k <span class="token operator">=</span> k<span class="token punctuation">.</span>next
						<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							removeCount<span class="token operator">++</span><span class="token punctuation">;</span>
							p <span class="token operator">+=</span> k<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						removeCount<span class="token operator">--</span><span class="token punctuation">;</span>

						<span class="token comment">// replace with the new match</span>
						str <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>pos<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
						match<span class="token punctuation">.</span>index <span class="token operator">-=</span> pos<span class="token punctuation">;</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						match <span class="token operator">=</span> <span class="token function">matchPattern</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> str<span class="token punctuation">,</span> lookbehind<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>match<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							<span class="token keyword">continue</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>

					<span class="token comment">// eslint-disable-next-line no-redeclare</span>
					<span class="token keyword">var</span> from <span class="token operator">=</span> match<span class="token punctuation">.</span>index<span class="token punctuation">;</span>
					<span class="token keyword">var</span> matchStr <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">var</span> before <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> from<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">var</span> after <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>from <span class="token operator">+</span> matchStr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">var</span> reach <span class="token operator">=</span> pos <span class="token operator">+</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>rematch <span class="token operator">&amp;&amp;</span> reach <span class="token operator">&gt;</span> rematch<span class="token punctuation">.</span>reach<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						rematch<span class="token punctuation">.</span>reach <span class="token operator">=</span> reach<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">var</span> removeFrom <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>prev<span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>before<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						removeFrom <span class="token operator">=</span> <span class="token function">addAfter</span><span class="token punctuation">(</span>tokenList<span class="token punctuation">,</span> removeFrom<span class="token punctuation">,</span> before<span class="token punctuation">)</span><span class="token punctuation">;</span>
						pos <span class="token operator">+=</span> before<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token function">removeRange</span><span class="token punctuation">(</span>tokenList<span class="token punctuation">,</span> removeFrom<span class="token punctuation">,</span> removeCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">var</span> wrapped <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Token</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> inside <span class="token operator">?</span> _<span class="token punctuation">.</span><span class="token function">tokenize</span><span class="token punctuation">(</span>matchStr<span class="token punctuation">,</span> inside<span class="token punctuation">)</span> <span class="token operator">:</span> matchStr<span class="token punctuation">,</span> alias<span class="token punctuation">,</span> matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
					currentNode <span class="token operator">=</span> <span class="token function">addAfter</span><span class="token punctuation">(</span>tokenList<span class="token punctuation">,</span> removeFrom<span class="token punctuation">,</span> wrapped<span class="token punctuation">)</span><span class="token punctuation">;</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>after<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">addAfter</span><span class="token punctuation">(</span>tokenList<span class="token punctuation">,</span> currentNode<span class="token punctuation">,</span> after<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>

					<span class="token keyword">if</span> <span class="token punctuation">(</span>removeCount <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// at least one Token object was removed, so we have to do some rematching</span>
						<span class="token comment">// this can only happen if the current pattern is greedy</span>

						<span class="token comment">/** @type {RematchOptions} */</span>
						<span class="token keyword">var</span> nestedRematch <span class="token operator">=</span> <span class="token punctuation">{</span>
							<span class="token literal-property property">cause</span><span class="token operator">:</span> token <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> j<span class="token punctuation">,</span>
							<span class="token literal-property property">reach</span><span class="token operator">:</span> reach
						<span class="token punctuation">}</span><span class="token punctuation">;</span>
						<span class="token function">matchGrammar</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> tokenList<span class="token punctuation">,</span> grammar<span class="token punctuation">,</span> currentNode<span class="token punctuation">.</span>prev<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> nestedRematch<span class="token punctuation">)</span><span class="token punctuation">;</span>

						<span class="token comment">// the reach might have been extended because of the rematching</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>rematch <span class="token operator">&amp;&amp;</span> nestedRematch<span class="token punctuation">.</span>reach <span class="token operator">&gt;</span> rematch<span class="token punctuation">.</span>reach<span class="token punctuation">)</span> <span class="token punctuation">{</span>
							rematch<span class="token punctuation">.</span>reach <span class="token operator">=</span> nestedRematch<span class="token punctuation">.</span>reach<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * @typedef LinkedListNode
	 * @property {T} value
	 * @property {LinkedListNode&lt;T&gt; | null} prev The previous node.
	 * @property {LinkedListNode&lt;T&gt; | null} next The next node.
	 * @template T
	 * @private
	 */</span>

	<span class="token comment">/**
	 * @template T
	 * @private
	 */</span>
	<span class="token keyword">function</span> <span class="token function">LinkedList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">/** @type {LinkedListNode&lt;T&gt;} */</span>
		<span class="token keyword">var</span> head <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">prev</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token comment">/** @type {LinkedListNode&lt;T&gt;} */</span>
		<span class="token keyword">var</span> tail <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">prev</span><span class="token operator">:</span> head<span class="token punctuation">,</span> <span class="token literal-property property">next</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		head<span class="token punctuation">.</span>next <span class="token operator">=</span> tail<span class="token punctuation">;</span>

		<span class="token comment">/** @type {LinkedListNode&lt;T&gt;} */</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> head<span class="token punctuation">;</span>
		<span class="token comment">/** @type {LinkedListNode&lt;T&gt;} */</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> tail<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/**
	 * Adds a new node with the given value to the list.
	 *
	 * @param {LinkedList&lt;T&gt;} list
	 * @param {LinkedListNode&lt;T&gt;} node
	 * @param {T} value
	 * @returns {LinkedListNode&lt;T&gt;} The added node.
	 * @template T
	 */</span>
	<span class="token keyword">function</span> <span class="token function">addAfter</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> node<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// assumes that node != list.tail &amp;&amp; values.length &gt;= 0</span>
		<span class="token keyword">var</span> next <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>

		<span class="token keyword">var</span> newNode <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> value<span class="token punctuation">,</span> <span class="token literal-property property">prev</span><span class="token operator">:</span> node<span class="token punctuation">,</span> <span class="token literal-property property">next</span><span class="token operator">:</span> next <span class="token punctuation">}</span><span class="token punctuation">;</span>
		node<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
		next<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
		list<span class="token punctuation">.</span>length<span class="token operator">++</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> newNode<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/**
	 * Removes `count` nodes after the given node. The given node will not be removed.
	 *
	 * @param {LinkedList&lt;T&gt;} list
	 * @param {LinkedListNode&lt;T&gt;} node
	 * @param {number} count
	 * @template T
	 */</span>
	<span class="token keyword">function</span> <span class="token function">removeRange</span><span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> node<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> next <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count <span class="token operator">&amp;&amp;</span> next <span class="token operator">!==</span> list<span class="token punctuation">.</span>tail<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			next <span class="token operator">=</span> next<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		node<span class="token punctuation">.</span>next <span class="token operator">=</span> next<span class="token punctuation">;</span>
		next<span class="token punctuation">.</span>prev <span class="token operator">=</span> node<span class="token punctuation">;</span>
		list<span class="token punctuation">.</span>length <span class="token operator">-=</span> i<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/**
	 * @param {LinkedList&lt;T&gt;} list
	 * @returns {T[]}
	 * @template T
	 */</span>
	<span class="token keyword">function</span> <span class="token function">toArray</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> node <span class="token operator">=</span> list<span class="token punctuation">.</span>head<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!==</span> list<span class="token punctuation">.</span>tail<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			node <span class="token operator">=</span> node<span class="token punctuation">.</span>next<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> array<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>


	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_self<span class="token punctuation">.</span>document<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_self<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// in Node.js</span>
			<span class="token keyword">return</span> _<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_<span class="token punctuation">.</span>disableWorkerMessageHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// In worker</span>
			_self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">var</span> lang <span class="token operator">=</span> message<span class="token punctuation">.</span>language<span class="token punctuation">;</span>
				<span class="token keyword">var</span> code <span class="token operator">=</span> message<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
				<span class="token keyword">var</span> immediateClose <span class="token operator">=</span> message<span class="token punctuation">.</span>immediateClose<span class="token punctuation">;</span>

				_self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> _<span class="token punctuation">.</span>languages<span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">,</span> lang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>immediateClose<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					_self<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> _<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">// Get current script and highlight</span>
	<span class="token keyword">var</span> script <span class="token operator">=</span> _<span class="token punctuation">.</span>util<span class="token punctuation">.</span><span class="token function">currentScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>script<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		_<span class="token punctuation">.</span>filename <span class="token operator">=</span> script<span class="token punctuation">.</span>src<span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>script<span class="token punctuation">.</span><span class="token function">hasAttribute</span><span class="token punctuation">(</span><span class="token string">'data-manual'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			_<span class="token punctuation">.</span>manual <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">function</span> <span class="token function">highlightAutomaticallyCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_<span class="token punctuation">.</span>manual<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			_<span class="token punctuation">.</span><span class="token function">highlightAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_<span class="token punctuation">.</span>manual<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// If the document state is "loading", then we'll use DOMContentLoaded.</span>
		<span class="token comment">// If the document state is "interactive" and the prism.js script is deferred, then we'll also use the</span>
		<span class="token comment">// DOMContentLoaded event because there might be some plugins or languages which have also been deferred and they</span>
		<span class="token comment">// might take longer one animation frame to execute which can create a race condition where only some plugins have</span>
		<span class="token comment">// been loaded when Prism.highlightAll() is executed, depending on how fast resources are loaded.</span>
		<span class="token comment">// See https://github.com/PrismJS/prism/issues/2102</span>
		<span class="token keyword">var</span> readyState <span class="token operator">=</span> document<span class="token punctuation">.</span>readyState<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>readyState <span class="token operator">===</span> <span class="token string">'loading'</span> <span class="token operator">||</span> readyState <span class="token operator">===</span> <span class="token string">'interactive'</span> <span class="token operator">&amp;&amp;</span> script <span class="token operator">&amp;&amp;</span> script<span class="token punctuation">.</span>defer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> highlightAutomaticallyCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>requestAnimationFrame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>highlightAutomaticallyCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>highlightAutomaticallyCallback<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> _<span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">(</span>_self<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Prism<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// hack for components to work correctly in node.js</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> global <span class="token operator">!==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	global<span class="token punctuation">.</span>Prism <span class="token operator">=</span> Prism<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// some additional documentation/types</span>

<span class="token comment">/**
 * The expansion of a simple `RegExp` literal to support additional properties.
 *
 * @typedef GrammarToken
 * @property {RegExp} pattern The regular expression of the token.
 * @property {boolean} [lookbehind=false] If `true`, then the first capturing group of `pattern` will (effectively)
 * behave as a lookbehind group meaning that the captured text will not be part of the matched text of the new token.
 * @property {boolean} [greedy=false] Whether the token is greedy.
 * @property {string|string[]} [alias] An optional alias or list of aliases.
 * @property {Grammar} [inside] The nested grammar of this token.
 *
 * The `inside` grammar will be used to tokenize the text value of each token of this kind.
 *
 * This can be used to make nested and even recursive language definitions.
 *
 * Note: This can cause infinite recursion. Be careful when you embed different languages or even the same language into
 * each another.
 * @global
 * @public
 */</span>

<span class="token comment">/**
 * @typedef Grammar
 * @type {Object&lt;string, RegExp | GrammarToken | Array&lt;RegExp | GrammarToken&gt;&gt;}
 * @property {Grammar} [rest] An optional grammar object that will be appended to this grammar.
 * @global
 * @public
 */</span>

<span class="token comment">/**
 * A function which will invoked after an element was successfully highlighted.
 *
 * @callback HighlightCallback
 * @param {Element} element The element successfully highlighted.
 * @returns {void}
 * @global
 * @public
 */</span>

<span class="token comment">/**
 * @callback HookCallback
 * @param {Object&lt;string, any&gt;} env The environment variables of the hook.
 * @returns {void}
 * @global
 * @public
 */</span>
<span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string-property property">'comment'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;!--(?:(?!&lt;!--)[\s\S])*?--&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'prolog'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;\?[\s\S]+?\?&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'doctype'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// https://www.w3.org/TR/xml/#NT-doctypedecl</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;!DOCTYPE(?:[^&gt;"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^&lt;"'\]]|"[^"]*"|'[^']*'|&lt;(?!!--)|&lt;!--(?:[^-]|-(?!-&gt;))*--&gt;)*\]\s*)?&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">'internal-subset'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^[^\[]*\[)[\s\S]+(?=\]&gt;$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token comment">// see below</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'string'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"[^"]*"|'[^']*'</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;!|&gt;$|[[\]]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token string-property property">'doctype-tag'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^DOCTYPE</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\s&lt;&gt;'"]+</span><span class="token regex-delimiter">/</span></span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'cdata'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;!\[CDATA\[[\s\S]*?\]\]&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'tag'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;\/?(?!\d)[^\s&gt;\/=$&lt;%]+(?:\s(?:\s*[^\s&gt;\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'"&gt;=]+(?=[\s&gt;]))|(?=[\s/&gt;])))+)?\s*\/?&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">'tag'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;\/?[^\s&gt;\/]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;\/?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token string-property property">'namespace'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^\s&gt;\/:]+:</span><span class="token regex-delimiter">/</span></span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'special-attr'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token string-property property">'attr-value'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">=\s*(?:"[^"]*"|'[^']*'|[^\s'"&gt;=]+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
						<span class="token punctuation">{</span>
							<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^=</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
							<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'attr-equals'</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
						<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"|'</span><span class="token regex-delimiter">/</span></span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/?&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token string-property property">'attr-name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\s&gt;\/]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">'namespace'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^\s&gt;\/:]+:</span><span class="token regex-delimiter">/</span></span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'entity'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;[\da-z]{1,8};</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'named-entity'</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;#x?[\da-f]{1,8};</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">[</span><span class="token string">'tag'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>inside<span class="token punctuation">[</span><span class="token string">'attr-value'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>inside<span class="token punctuation">[</span><span class="token string">'entity'</span><span class="token punctuation">]</span> <span class="token operator">=</span>
	Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">[</span><span class="token string">'entity'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">[</span><span class="token string">'doctype'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>inside<span class="token punctuation">[</span><span class="token string">'internal-subset'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>inside <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">;</span>

<span class="token comment">// Plugin to make entity title show the real entity, idea by Roman Komarov</span>
Prism<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'wrap'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">env</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'entity'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		env<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> env<span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&amp;amp;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">.</span>tag<span class="token punctuation">,</span> <span class="token string">'addInlined'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token comment">/**
	 * Adds an inlined language to markup.
	 *
	 * An example of an inlined language is CSS with `&lt;style&gt;` tags.
	 *
	 * @param {string} tagName The name of the tag that contains the inlined language. This name will be treated as
	 * case insensitive.
	 * @param {string} lang The language key.
	 * @example
	 * addInlined('style', 'css');
	 */</span>
	<span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">addInlined</span><span class="token punctuation">(</span><span class="token parameter">tagName<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> includedCdataInside <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		includedCdataInside<span class="token punctuation">[</span><span class="token string">'language-'</span> <span class="token operator">+</span> lang<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^&lt;!\[CDATA\[)[\s\S]+?(?=\]\]&gt;$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">[</span>lang<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		includedCdataInside<span class="token punctuation">[</span><span class="token string">'cdata'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^&lt;!\[CDATA\[|\]\]&gt;$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> inside <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token string-property property">'included-cdata'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;!\[CDATA\[[\s\S]*?\]\]&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> includedCdataInside
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		inside<span class="token punctuation">[</span><span class="token string">'language-'</span> <span class="token operator">+</span> lang<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\s\S]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">[</span>lang<span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token keyword">var</span> def <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		def<span class="token punctuation">[</span>tagName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(&lt;__[^&gt;]*&gt;)(?:&lt;!\[CDATA\[(?:[^\]]|\](?!\]&gt;))*\]\]&gt;|(?!&lt;!\[CDATA\[)[\s\S])*?(?=&lt;\/__&gt;)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">__</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> tagName<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> inside
		<span class="token punctuation">}</span><span class="token punctuation">;</span>

		Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token string">'markup'</span><span class="token punctuation">,</span> <span class="token string">'cdata'</span><span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">.</span>tag<span class="token punctuation">,</span> <span class="token string">'addAttribute'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token comment">/**
	 * Adds an pattern to highlight languages embedded in HTML attributes.
	 *
	 * An example of an inlined language is CSS with `style` attributes.
	 *
	 * @param {string} attrName The name of the tag that contains the inlined language. This name will be treated as
	 * case insensitive.
	 * @param {string} lang The language key.
	 * @example
	 * addAttribute('style', 'css');
	 */</span>
	<span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">attrName<span class="token punctuation">,</span> lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">.</span>tag<span class="token punctuation">.</span>inside<span class="token punctuation">[</span><span class="token string">'special-attr'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>
				<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|["'\s])</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source <span class="token operator">+</span> <span class="token string">'(?:'</span> <span class="token operator">+</span> attrName <span class="token operator">+</span> <span class="token string">')'</span> <span class="token operator">+</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'"&gt;=]+(?=[\s&gt;]))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source<span class="token punctuation">,</span>
				<span class="token string">'i'</span>
			<span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">'attr-name'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^\s=]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token string-property property">'attr-value'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">=[\s\S]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token string-property property">'value'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
							<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
							<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
							<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">[</span>lang<span class="token punctuation">,</span> <span class="token string">'language-'</span> <span class="token operator">+</span> lang<span class="token punctuation">]</span><span class="token punctuation">,</span>
							<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">[</span>lang<span class="token punctuation">]</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span>
						<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
							<span class="token punctuation">{</span>
								<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^=</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
								<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'attr-equals'</span>
							<span class="token punctuation">}</span><span class="token punctuation">,</span>
							<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">"|'</span><span class="token regex-delimiter">/</span></span>
						<span class="token punctuation">]</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>html <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>mathml <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>svg <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>xml <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">'markup'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>ssml <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>xml<span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>atom <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>xml<span class="token punctuation">;</span>
Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>rss <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>xml<span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Prism</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

	Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>css <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token string-property property">'comment'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/\*[\s\S]*?\*\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token string-property property">'atrule'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">'rule'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^@[\w-]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token string-property property">'selector-function-argument'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'selector'</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string-property property">'keyword'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^\w-])(?:and|not|only|or)(?![\w-])</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
					<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// See rest below</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">'url'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token comment">// https://drafts.csswg.org/css-values-3/#urls</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token string">'\\burl\\((?:'</span> <span class="token operator">+</span> string<span class="token punctuation">.</span>source <span class="token operator">+</span> <span class="token string">'|'</span> <span class="token operator">+</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?:[^\\\r\n()"']|\\[\s\S])*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source <span class="token operator">+</span> <span class="token string">')\\)'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">'function'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^url</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
				<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\(|\)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token string-property property">'string'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token string">'^'</span> <span class="token operator">+</span> string<span class="token punctuation">.</span>source <span class="token operator">+</span> <span class="token string">'$'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'url'</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">'selector'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token string">'(^|[{}\\s])[^{}\\s](?:[^{};"\'\\s]|\\s+(?![\\s{])|'</span> <span class="token operator">+</span> string<span class="token punctuation">.</span>source <span class="token operator">+</span> <span class="token string">')*(?=\\s*\\{)'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">'string'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
			<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">'property'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">'important'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">!important\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		<span class="token string-property property">'function'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^-a-z0-9])[-a-z0-9]+(?=\()</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[(){};:,]</span><span class="token regex-delimiter">/</span></span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>css<span class="token punctuation">[</span><span class="token string">'atrule'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>inside<span class="token punctuation">.</span>rest <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>css<span class="token punctuation">;</span>

	<span class="token keyword">var</span> markup <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>markup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		markup<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">addInlined</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		markup<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">(</span>Prism<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>clike <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string-property property">'comment'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^\\:])\/\/.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">'string'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'class-name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[.\\]</span><span class="token regex-delimiter">/</span></span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'keyword'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token string-property property">'boolean'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b(?:false|true)\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token string-property property">'function'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b\w+(?=\()</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token string-property property">'number'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
	<span class="token string-property property">'operator'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&lt;&gt;]=?|[!=]=?=?|--?|\+\+?|&amp;&amp;?|\|\|?|[?*/~^%]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token string-property property">'punctuation'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[{}[\];(),.:]</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token string">'clike'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token string-property property">'class-name'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>clike<span class="token punctuation">[</span><span class="token string">'class-name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">'keyword'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:^|\})\s*)catch\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)</span>
	<span class="token string-property property">'function'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
	<span class="token string-property property">'number'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token function">RegExp</span><span class="token punctuation">(</span>
			<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^\w$])</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source <span class="token operator">+</span>
			<span class="token string">'(?:'</span> <span class="token operator">+</span>
			<span class="token punctuation">(</span>
				<span class="token comment">// constant</span>
				<span class="token operator">/</span><span class="token number">NaN</span><span class="token operator">|</span><span class="token number">Infinity</span><span class="token operator">/</span><span class="token punctuation">.</span>source <span class="token operator">+</span>
				<span class="token string">'|'</span> <span class="token operator">+</span>
				<span class="token comment">// binary integer</span>
				<span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">[</span>bB<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">01</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_<span class="token punctuation">[</span><span class="token number">01</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token operator">?</span><span class="token operator">/</span><span class="token punctuation">.</span>source <span class="token operator">+</span>
				<span class="token string">'|'</span> <span class="token operator">+</span>
				<span class="token comment">// octal integer</span>
				<span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">[</span>oO<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token operator">?</span><span class="token operator">/</span><span class="token punctuation">.</span>source <span class="token operator">+</span>
				<span class="token string">'|'</span> <span class="token operator">+</span>
				<span class="token comment">// hexadecimal integer</span>
				<span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">[</span>xX<span class="token punctuation">]</span><span class="token punctuation">[</span>\dA<span class="token operator">-</span>Fa<span class="token operator">-</span>f<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_<span class="token punctuation">[</span>\dA<span class="token operator">-</span>Fa<span class="token operator">-</span>f<span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token operator">?</span><span class="token operator">/</span><span class="token punctuation">.</span>source <span class="token operator">+</span>
				<span class="token string">'|'</span> <span class="token operator">+</span>
				<span class="token comment">// decimal bigint</span>
				<span class="token operator">/</span>\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token operator">/</span><span class="token punctuation">.</span>source <span class="token operator">+</span>
				<span class="token string">'|'</span> <span class="token operator">+</span>
				<span class="token comment">// decimal number (integer or float) but no bigint</span>
				<span class="token operator">/</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>\<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token operator">|</span>\<span class="token punctuation">.</span>\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span><span class="token punctuation">[</span>Ee<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">+</span><span class="token operator">-</span><span class="token punctuation">]</span><span class="token operator">?</span>\d<span class="token operator">+</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token operator">:</span>_\d<span class="token operator">+</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token operator">/</span><span class="token punctuation">.</span>source
			<span class="token punctuation">)</span> <span class="token operator">+</span>
			<span class="token string">')'</span> <span class="token operator">+</span>
			<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?![\w$])</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source
		<span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'operator'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">--|\+\+|\*\*=?|=&gt;|&amp;&amp;=?|\|\|=?|[!=]==|&lt;&lt;=?|&gt;&gt;&gt;?=?|[-+*/%&amp;|^!=&lt;&gt;]=?|\.{3}|\?\?=?|\?\.?|[~:]</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript<span class="token punctuation">[</span><span class="token string">'class-name'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token string">'javascript'</span><span class="token punctuation">,</span> <span class="token string">'keyword'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token string-property property">'regex'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token comment">// eslint-disable-next-line regexp/no-dupe-characters-character-class</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">'regex-source'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(\/)[\s\S]+(?=\/[a-z]*$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'language-regex'</span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>regex
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'regex-delimiter'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/|\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token string-property property">'regex-flags'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-z]+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// This must be declared before keyword because we use "function" inside the look-forward</span>
	<span class="token string-property property">'function-variable'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=&gt;))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'function'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'parameter'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=&gt;)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=&gt;)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>
			<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
			<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token literal-property property">inside</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string-property property">'constant'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b[A-Z](?:[A-Z_]|\dx?)*\b</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token string">'javascript'</span><span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token string-property property">'hashbang'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^#!.*</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'comment'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'template-string'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">'template-punctuation'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^`|`$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'string'</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'interpolation'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
				<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
				<span class="token literal-property property">inside</span><span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">'interpolation-punctuation'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
						<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\$\{|\}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
						<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'punctuation'</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token literal-property property">rest</span><span class="token operator">:</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">'string'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\s\S]+</span><span class="token regex-delimiter">/</span></span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">'string-property'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">m</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">greedy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'property'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span><span class="token string">'javascript'</span><span class="token punctuation">,</span> <span class="token string">'operator'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	<span class="token string-property property">'literal-property'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">pattern</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">m</span></span><span class="token punctuation">,</span>
		<span class="token literal-property property">lookbehind</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token string">'property'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">addInlined</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">,</span> <span class="token string">'javascript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// add attribute support for all DOM events.</span>
	<span class="token comment">// https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events</span>
	Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">.</span>tag<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>
		<span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>source<span class="token punctuation">,</span>
		<span class="token string">'javascript'</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>js <span class="token operator">=</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>javascript<span class="token punctuation">;</span>
</code></pre>
</body>
</html>
